<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Adam & Lachlan Rewards Chart</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial, sans-serif;
  background:#f2f7ff;
  margin:0;
  padding:16px;
}

h1{text-align:center;margin-bottom:16px}

.race{
  background:white;
  border-radius:18px;
  padding:14px;
  margin-bottom:20px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
}
.track{
  background:#ddd;
  height:20px;
  border-radius:12px;
  overflow:hidden;
  margin:6px 0 12px;
}
.runner{
  height:100%;
  width:0%;
  transition:width .4s ease;
}
.blue{background:#4da3ff}
.green{background:#5ecf8e}

.container{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
  gap:20px;
  max-width:1100px;
  margin:auto;
}

.card{
  background:white;
  border-radius:20px;
  padding:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.12);
}

.avatar{text-align:center;font-size:44px}
.name{text-align:center;font-weight:bold;font-size:22px;margin-bottom:6px}

.progress{
  background:#ddd;
  height:14px;
  border-radius:10px;
  overflow:hidden;
  margin-bottom:10px;
}
.progress span{
  display:block;
  height:100%;
  width:0%;
  transition:width .4s ease;
}

.section{margin-top:12px}
.section-title{
  text-align:center;
  color:white;
  font-weight:bold;
  padding:6px;
  border-radius:12px;
}
.morning{background:#ffb74d}
.afternoon{background:#81c8f8}
.evening{background:#9575cd}

.task{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:6px 0;
}
.task button{
  border:none;
  background:#ffd54f;
  border-radius:50%;
  width:30px;
  height:30px;
  cursor:pointer;
}

.stats{
  background:#eef6ff;
  padding:10px;
  border-radius:12px;
  text-align:center;
  margin-top:10px;
  font-size:14px;
}

.rewards{
  background:#fff1dc;
  padding:10px;
  border-radius:12px;
  margin-top:12px;
}
.reward{
  background:#ff8fa3;
  color:white;
  padding:8px;
  border-radius:10px;
  text-align:center;
  margin-top:6px;
  cursor:pointer;
}

.reset{text-align:center;margin-top:10px}
.reset button{
  background:#ffd54f;
  border:none;
  padding:6px 14px;
  border-radius:12px;
  cursor:pointer;
}

#winner{
  display:none;
  position:fixed;
  inset:0;
  background:#000c;
  color:white;
  font-size:32px;
  align-items:center;
  justify-content:center;
  text-align:center;
  z-index:10;
}

</style>
</head>
  
<script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("/rewards-app/service-worker.js")
      .then(reg => console.log("Service Worker registered:", reg.scope))
      .catch(err => console.error("Service Worker registration failed:", err));
  });
}
</script>
<body>

<h1>â­ Rewards Chart â­</h1>

<div class="race">
  <b>ğŸ Star Race</b>
  Adam
  <div class="track"><div id="race0" class="runner blue"></div></div>
  Lachlan
  <div class="track"><div id="race1" class="runner green"></div></div>
</div>

<div class="container">

<!-- ADAM -->
<div class="card">
  <div class="avatar">ğŸš€</div>
  <div class="name">Adam</div>
  <div class="progress"><span class="blue"></span></div>

  <div class="section">
  <div class="section-title morning">Morning</div>

  <div class="task">
    <span>ğŸ‘• Get dressed â­1</span>
   <button class="check" onclick="toggleTask(this,0,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ›ï¸ Make bed â­1</span>
    <button class="check" onclick="toggleTask(this,0,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ§¼ Wash face & moisturise â­1</span>
    <button class="check" onclick="toggleTask(this,0,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ’ Pack school bag â­1</span>
    <button class="check" onclick="toggleTask(this,0,1)"></button>
  </div>
</div>
  
  <div class="section">
    <div class="section-title afternoon">Afternoon</div>
    <div class="task"><span>ğŸ’ Unpack school bag â­2</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
    <div class="task"><span>ğŸ“š Homework â­2</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
    <div class="task"><span>ğŸ½ï¸ Set table â­2</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
    <div class="task"><span>ğŸ“– 10 min reading â­3</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
  </div>

  <div class="section">
    <div class="section-title evening">Evening</div>
    <div class="task"><span>ğŸ½ï¸ Clean table â­1</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
    <div class="task"><span>ğŸš¿ Shower & brush teeth â­1</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
    <div class="task"><span>ğŸ½ï¸ Unload dishwasher â­3</span><button class="check" onclick="toggleTask(this,0,1)"></button>
</div>
  </div>

  <div class="stats" id="stats0"></div>

  <div class="rewards">
    <div class="reward" onclick="redeem(0,5,false)">ğŸª Treat â€“ â­5</div>
    <div class="reward" onclick="redeem(0,30,true)">ğŸ“º 1 Hour YouTube â€“ â­30</div>
    <div class="reward" onclick="redeem(0,40,true)">ğŸ¬ Movie Night â€“ â­40</div>
    <div class="reward" onclick="redeem(0,40,true)">ğŸ² Board Game Night â€“ â­40</div>
  </div>

  <div class="reset"><button onclick="resetChild(0)">ğŸ”’ Parent Reset</button></div>
</div>

<!-- LACHLAN -->
<div class="card">
  <div class="avatar">ğŸ¯</div>
  <div class="name">Lachlan</div>
  <div class="progress"><span class="green"></span></div>

 <div class="section">
  <div class="section-title morning">Morning</div>

  <div class="task">
    <span>ğŸ‘• Get dressed â­1</span>
    <button class="check" onclick="toggleTask(this,1,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ›ï¸ Make bed â­1</span>
    <button class="check" onclick="toggleTask(this,1,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ§¼ Wash face & moisturise â­1</span>
    <button class="check" onclick="toggleTask(this,1,1)"></button>
  </div>

  <div class="task">
    <span>ğŸ’ Pack school bag â­1</span>
    <button class="check" onclick="toggleTask(this,1,1)"></button>
  </div>
</div>

  <div class="section">
    <div class="section-title afternoon">Afternoon</div>
    <div class="task"><span>ğŸ’ Unpack school bag â­2</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
    <div class="task"><span>ğŸ“š Homework â­2</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
    <div class="task"><span>ğŸ½ï¸ Set table â­2</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
    <div class="task"><span>ğŸ“– 10 min reading â­3</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
  </div>

  <div class="section">
    <div class="section-title evening">Evening</div>
    <div class="task"><span>ğŸ½ï¸ Clean table â­1</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
    <div class="task"><span>ğŸš¿ Shower & brush teeth â­1</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
    <div class="task"><span>ğŸ§º Put laundry away â­3</span><button class="check" onclick="toggleTask(this,1,1)"></button>
</div>
  </div>

  <div class="stats" id="stats1"></div>

  <div class="rewards">
    <div class="reward" onclick="redeem(1,5,false)">ğŸª Treat â€“ â­5</div>
    <div class="reward" onclick="redeem(1,30,true)">ğŸ“º 1 Hour YouTube â€“ â­30</div>
    <div class="reward" onclick="redeem(1,40,true)">ğŸ¬ Movie Night â€“ â­40</div>
    <div class="reward" onclick="redeem(1,40,true)">ğŸ² Board Game Night â€“ â­40</div>
  </div>

  <div class="reset"><button onclick="resetChild(1)">ğŸ”’ Parent Reset</button></div>
</div>

</div>

<div id="winner"></div>

<script>
const PIN="9747";
const DAILY_GOAL=15;

let data = JSON.parse(localStorage.getItem("kidsData")) || {
  kids:[{daily:0,total:0},{daily:0,total:0}],
  lastDay:"",
  lastWeek:""
};

function today(){return new Date().toDateString();}
function isWeekend(){
  const d=new Date().getDay();
  return d===5||d===6||d===0;
}

function autoReset(){
  const now=today();
  if(data.lastDay!==now){
    data.kids.forEach(k=>k.daily=0);
    data.lastDay=now;
  }
  const monday = new Date();
  monday.setDate(monday.getDate()-((monday.getDay()+6)%7));
  if(data.lastWeek!==monday.toDateString()){
    data.kids.forEach(k=>k.total=0);
    data.lastWeek=monday.toDateString();
  }
}

function addStar(i,val){
  autoReset();
  data.kids[i].daily+=val;
  data.kids[i].total+=val;
  save();
  if(data.kids[i].daily>=DAILY_GOAL) win(i);
}

function redeem(i,cost,weekendOnly){
  if(weekendOnly && !isWeekend()) return alert("Available Fridayâ€“Sunday only");
  if(data.kids[i].total<cost) return alert("Not enough stars");
  if(prompt("Enter parent PIN")===PIN){
    data.kids[i].total-=cost;
    save();
  }
}

function resetChild(i){
  if(prompt("Enter parent PIN")===PIN){
    data.kids[i].daily=0;
    data.kids[i].total=0;
    save();
  }
}

function win(i){
  const w=document.getElementById("winner");
  w.style.display="flex";
  w.innerText=`ğŸ‰ ${i===0?"Adam":"Lachlan"} Wins Today! ğŸ‰`;
  setTimeout(()=>w.style.display="none",4000);
}

function save(){
  localStorage.setItem("kidsData",JSON.stringify(data));
  render();
}

function render(){
  data.kids.forEach((k,i)=>{
    document.getElementById("stats"+i).innerHTML=
      `â­ Today: ${k.daily}<br>â­ Total: ${k.total}`;
    document.querySelectorAll(".progress span")[i]
      .style.width=Math.min(k.daily/DAILY_GOAL*100,100)+"%";
    document.getElementById("race"+i)
      .style.width=Math.min(k.daily/DAILY_GOAL*100,100)+"%";
  });
}

autoReset();
render();
</script>
<script>
function toggleTask(btn, childIndex, stars){
  if(btn.classList.contains("done")) return; // already checked

  btn.classList.add("done");
  addStar(childIndex, stars);
}
</script>
</body>
</html>
